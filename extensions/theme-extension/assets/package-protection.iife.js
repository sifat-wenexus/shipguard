var ie=Object.defineProperty;var se=(x,g,C)=>g in x?ie(x,g,{enumerable:!0,configurable:!0,writable:!0,value:C}):x[g]=C;var _=(x,g,C)=>(se(x,typeof g!="symbol"?g+"":g,C),C);(function(){"use strict";var x=(h=>(h.BASED_ON_CART_VALUE="BASED_ON_CART_VALUE",h.PERCENTAGE="PERCENTAGE",h.FIXED="FIXED",h))(x||{});const A=class A{constructor(e,t){_(this,"basedOnCartValueVariants",[]);_(this,"percentageVariants",{});_(this,"fixedVariantOption",null);_(this,"_type","PERCENTAGE");_(this,"variantIds",new Set);_(this,"prices",[]);return this.percentage=e,this.enabled=t,A.instance&&(A.instance=this),A.instance}get highestPrice(){return this.prices[this.prices.length-1]}get lowestPrice(){return this.prices[0]}setVariants(e,t){if(this._type=e,this.prices.length=0,this.variantIds.clear(),e==="PERCENTAGE"){for(const a of Object.keys(this.percentageVariants))delete this.percentageVariants[a];this.prices.push(...Object.keys(t).map(Number).sort((a,c)=>a-c));for(const a of Object.keys(t))this.percentageVariants[a]=t[a],this.variantIds.add(t[a])}else e==="FIXED"?(this.variantIds.add(t.variantId),this.fixedVariantOption=t,this.prices.push(t.price)):(this.basedOnCartValueVariants.push(...t),this.basedOnCartValueVariants.forEach(a=>this.variantIds.add(a.variantId)),this.prices.push(...this.basedOnCartValueVariants.map(a=>a.price).sort((a,c)=>a-c)))}async getNonPackageProtectionItems(){return(await window.weNexusCartApi.get()).items.filter(t=>!this.variantIds.has(t.variant_id))}async getPackageProtectionItems(){return(await window.weNexusCartApi.get()).items.filter(t=>this.variantIds.has(t.variant_id))}async calculate(){const e=await this.getNonPackageProtectionItems(),t=window.WeNexusShipGuardPackageProtectionSettings.packageProtectionProductAndVariants.map(r=>r.excludedPackageProtectionVariants.map(s=>Number(s.id.replace("gid://shopify/ProductVariant/","")))).flat(),m=(()=>{const r=[];for(let s=0;s<e.length;s++){const n=e[s].variant_id;t.includes(n)||r.push(e[s])}return r})().reduce((r,s)=>r+s.final_line_price,0)/100;if(this._type==="FIXED"){if(this.fixedVariantOption===null)throw new Error("No variant has been set");return{actualPrice:this.fixedVariantOption.price,variantId:this.fixedVariantOption.variantId,coercedPrice:this.fixedVariantOption.price.toFixed(2),forPrice:m}}if(this._type==="PERCENTAGE"){if(this.prices.length===0)throw new Error("No variants have been set");let r=this.lowestPrice.toFixed(2),s=m/100*this.percentage;if(s<=this.highestPrice&&s>=this.lowestPrice){for(const n of this.prices)if(n>s){r=n.toFixed(2);break}}else s>this.highestPrice?r=this.highestPrice.toFixed(2):s<this.lowestPrice&&(r=this.lowestPrice.toFixed(2));return{actualPrice:Number(s.toFixed(2)),variantId:this.percentageVariants[r],coercedPrice:r,forPrice:m}}if(this.basedOnCartValueVariants.length===0)throw new Error("No variants have been set");const i=m,o=this.basedOnCartValueVariants.find(r=>i>=r.min&&i<=r.max);if(!o)throw new Error("No variant found");return{actualPrice:o.price,variantId:o.variantId,coercedPrice:o.price.toFixed(2),forPrice:m}}async add(){if((await this.getPackageProtectionItems()).length>0)return;const{variantId:t}=await this.calculate();return(await window.weNexusCartApi.append([{id:t,quantity:1}],!1)).items.find(c=>c.variant_id===t)}async remove(){if(this.prices.length===0)throw new Error("No variants have been set");const e=await this.getPackageProtectionItems();if(e.length!==0)return await window.weNexusCartApi.remove(e.map(t=>t.variant_id),!1),e[0]}};_(A,"instance");let g=A;const C=[{name:"Dawn",attributes:{theme_store_id:887,schema_name:"Dawn"}},{name:"Trade",attributes:{theme_store_id:2699,schema_name:"Trade"}},{name:"Colorblock",attributes:{theme_store_id:1499,schema_name:"Colorblock"}},{name:"Crave",attributes:{theme_store_id:1363,schema_name:"Crave"}},{name:"Taste",attributes:{theme_store_id:1434,schema_name:"Taste"}},{name:"Publisher",attributes:{theme_store_id:1864,schema_name:"Publisher"}},{name:"Ride",attributes:{theme_store_id:1500,schema_name:"Ride"}},{name:"Studio",attributes:{theme_store_id:1431,schema_name:"Studio"}},{name:"Origin",attributes:{theme_store_id:1841,schema_name:"Origin"}},{name:"Sense",attributes:{theme_store_id:1356,schema_name:"Sense"}},{name:"Refresh",attributes:{theme_store_id:1567,schema_name:"Refresh"}},{name:"Craft",attributes:{theme_store_id:1368,schema_name:"Craft"}},{name:"Spotlight",attributes:{theme_store_id:1891,schema_name:"Spotlight"}},{name:"Be Yours",attributes:{theme_store_id:1399,schema_name:"Be Yours"}},{name:"Murmel",attributes:{theme_store_id:2512,schema_name:"Murmel"}},{name:"Sydney",attributes:{theme_store_id:2117,schema_name:"Sydney"}}],R=[{name:"Enterprise",attributes:{theme_store_id:1657,schema_name:"Enterprise"}}],U=[{name:"Kingdom",attributes:{theme_store_id:725,schema_name:"Kingdom"}},{name:"Andaman",attributes:{theme_store_id:1390,schema_name:"Andaman"}}],j=[{name:"Focal",attributes:{theme_store_id:714,schema_name:"Focal"}},{name:"Grid",attributes:{theme_store_id:718,schema_name:"Grid"}},{name:"Atom",attributes:{theme_store_id:1974,schema_name:"Atom"}},{name:"Avenue",attributes:{theme_store_id:865,schema_name:"Avenue"}}],H=[{name:"Impact",attributes:{theme_store_id:1190,schema_name:"Impact"}}],q=[{name:"Ascent",attributes:{theme_store_id:2989,schema_name:"Ascent"}},{name:"Aurora",attributes:{theme_store_id:1770,schema_name:"Aurora"}},{name:"Alchemy",attributes:{theme_store_id:657,schema_name:"Alchemy"}},{name:"Boost",attributes:{theme_store_id:863,schema_name:"Boost"}},{name:"Masonry",attributes:{theme_store_id:450,schema_name:"Masonry"}},{name:"Expression",attributes:{theme_store_id:230,schema_name:"Expression"}},{name:"Frame",attributes:{theme_store_id:1716,schema_name:"Frame"}},{name:"Lorenza",attributes:{theme_store_id:798,schema_name:"Lorenza"}},{name:"Spark",attributes:{theme_store_id:911,schema_name:"Spark"}},{name:"Momentum",attributes:{theme_store_id:1600,schema_name:"Momentum"}},{name:"Influence",attributes:{theme_store_id:1536,schema_name:"Influence"}},{name:"Fresh",attributes:{theme_store_id:908,schema_name:"Fresh"}},{name:"Capital",attributes:{theme_store_id:812,schema_name:"Capital"}},{name:"Envy",attributes:{theme_store_id:411,schema_name:"Envy"}},{name:"Xclusive",attributes:{theme_store_id:2221,schema_name:"Xclusive"}},{name:"Next",attributes:{theme_store_id:2240,schema_name:"Next"}},{name:"Forge",attributes:{theme_store_id:1492,schema_name:"Forge"}},{name:"Habitat",attributes:{theme_store_id:1581,schema_name:"Habitat"}},{name:"Pinnacle",attributes:{theme_store_id:2852,schema_name:"Pinnacle"}},{name:"Vantage",attributes:{theme_store_id:459,schema_name:"Vantage"}},{name:"Drop",attributes:{theme_store_id:1197,schema_name:"Drop"}},{name:"Foodie",attributes:{theme_store_id:918,schema_name:"Foodie"}},{name:"Distinctive",attributes:{theme_store_id:2431,schema_name:"Distinctive"}},{name:"Icon",attributes:{theme_store_id:686,schema_name:"Icon"}},{name:"Testament",attributes:{theme_store_id:623,schema_name:"Testament"}},{name:"Vision",attributes:{theme_store_id:2053,schema_name:"Vision"}},{name:"Mr Parker",attributes:{theme_store_id:567,schema_name:"Mr Parker"}},{name:"Fashionopolism",attributes:{theme_store_id:141,schema_name:"Fashionopolism"}},{name:"North",attributes:{theme_store_id:1460,schema_name:"North"}},{name:"Athens",attributes:{theme_store_id:1608,schema_name:"Athens"}},{name:"Maranello",attributes:{theme_store_id:2186,schema_name:"Maranello"}},{name:"Retina",attributes:{theme_store_id:601,schema_name:"Retina"}},{name:"Responsive",attributes:{theme_store_id:304,schema_name:"Responsive"}},{name:"Madrid",attributes:{theme_store_id:2870,schema_name:"Madrid"}},{name:"Charge",attributes:{theme_store_id:2063,schema_name:"Charge"}},{name:"Relax",attributes:{theme_store_id:2477,schema_name:"Relax"}},{name:"Starlite",attributes:{theme_store_id:2455,schema_name:"Starlite"}},{name:"Essence",attributes:{theme_store_id:2366,schema_name:"Essence"}},{name:"Abode",attributes:{theme_store_id:1918,schema_name:"Abode"}},{name:"Loft",attributes:{theme_store_id:846,schema_name:"Loft"}},{name:"Praise",attributes:{theme_store_id:2144,schema_name:"Praise"}},{name:"Roam",attributes:{theme_store_id:1777,schema_name:"Roam"}},{name:"Align",attributes:{theme_store_id:1966,schema_name:"Align"}},{name:"Release",attributes:{theme_store_id:2698,schema_name:"Release"}},{name:"Atlantic",attributes:{theme_store_id:566,schema_name:"Atlantic"}},{name:"Empire",attributes:{theme_store_id:838,schema_name:"Empire"}},{name:"Mode",attributes:{theme_store_id:1578,schema_name:"Mode"}},{name:"Warehouse",attributes:{theme_store_id:871,schema_name:"Warehouse"}},{name:"Yuva",attributes:{theme_store_id:1615,schema_name:"Yuva"}},{name:"Tokyo",attributes:{theme_store_id:2629,schema_name:"Tokyo"}},{name:"Redefine",attributes:{theme_store_id:3007,schema_name:"Redefine"}}],O=[{name:"Modular",attributes:{theme_store_id:849,schema_name:"Modular"}},{name:"Wonder",attributes:{theme_store_id:2684,schema_name:"Wonder"}},{name:"Honey",attributes:{theme_store_id:2160,schema_name:"Honey"}},{name:"Cornerstone",attributes:{theme_store_id:2348,schema_name:"Cornerstone"}},{name:"Stiletto",attributes:{theme_store_id:1621,schema_name:"Stiletto"}},{name:"Bullet",attributes:{theme_store_id:1114,schema_name:"Bullet"}},{name:"Reformation",attributes:{theme_store_id:1762,schema_name:"Reformation"}},{name:"Streamline",attributes:{theme_store_id:872,schema_name:"Streamline"}},{name:"Gem",attributes:{theme_store_id:2222,schema_name:"Gem"}},{name:"Impulse",attributes:{theme_store_id:857,schema_name:"Impulse"}},{name:"Motion",attributes:{theme_store_id:847,schema_name:"Motion"}},{name:"Essentials",attributes:{theme_store_id:2482,schema_name:"Essentials"}},{name:"Aesthetic",attributes:{theme_store_id:2514,schema_name:"Aesthetic"}},{name:"Whisk",attributes:{theme_store_id:1819,schema_name:"Whisk"}},{name:"Flawless",attributes:{theme_store_id:2847,schema_name:"Flawless"}},{name:"Copenhagen",attributes:{theme_store_id:2564,schema_name:"Copenhagen"}},{name:"Barcelona",attributes:{theme_store_id:2324,schema_name:"Barcelona"}},{name:"Monaco",attributes:{theme_store_id:2125,schema_name:"Monaco"}},{name:"Berlin",attributes:{theme_store_id:2138,schema_name:"Berlin"}},{name:"Pursuit",attributes:{theme_store_id:1654,schema_name:"Pursuit"}},{name:"Multi",attributes:{theme_store_id:2337,schema_name:"Multi"}},{name:"ShowTime",attributes:{theme_store_id:687,schema_name:"ShowTime"}},{name:"Galleria",attributes:{theme_store_id:851,schema_name:"Galleria"}},{name:"Digital",attributes:{theme_store_id:2539,schema_name:"Digital"}},{name:"Outsiders",attributes:{theme_store_id:2896,schema_name:"Outsiders"}},{name:"Swipe",attributes:{theme_store_id:2737,schema_name:"Swipe"}},{name:"Select",attributes:{theme_store_id:2372,schema_name:"Select"}},{name:"Minimalista",attributes:{theme_store_id:2316,schema_name:"Minimalista"}},{name:"Stockmart",attributes:{theme_store_id:2105,schema_name:"Stockmart"}},{name:"Fame",attributes:{theme_store_id:2101,schema_name:"Fame"}},{name:"Gain",attributes:{theme_store_id:2077,schema_name:"Gain"}},{name:"Boutique",attributes:{theme_store_id:3051,schema_name:"Boutique"}},{name:"Ultra",attributes:{theme_store_id:2967,schema_name:"Ultra"}},{name:"Infinity",attributes:{theme_store_id:2061,schema_name:"Infinity"}},{name:"Colors",attributes:{theme_store_id:757,schema_name:"Colors"}},{name:"California",attributes:{theme_store_id:691,schema_name:"California"}},{name:"Stockholm",attributes:{theme_store_id:1405,schema_name:"Stockholm"}},{name:"Portland",attributes:{theme_store_id:1924,schema_name:"Portland"}},{name:"Handmade",attributes:{theme_store_id:1791,schema_name:"Handmade"}},{name:"Kidu",attributes:{theme_store_id:2268,schema_name:"Kidu"}},{name:"Nexa",attributes:{theme_store_id:2820,schema_name:"Nexa"}},{name:"Urban",attributes:{theme_store_id:2405,schema_name:"Urban"}},{name:"Agile",attributes:{theme_store_id:2346,schema_name:"Agile"}},{name:"Nostalgia",attributes:{theme_store_id:2175,schema_name:"Nostalgia"}},{name:"Refine",attributes:{theme_store_id:2782,schema_name:"Refine"}},{name:"Mandolin",attributes:{theme_store_id:1696,schema_name:"Mandolin"}},{name:"Lute",attributes:{theme_store_id:2171,schema_name:"Lute"}},{name:"Banjo",attributes:{theme_store_id:1778,schema_name:"Banjo"}},{name:"Chord",attributes:{theme_store_id:1584,schema_name:"Chord"}},{name:"Effortless",attributes:{theme_store_id:1743,schema_name:"Effortless"}},{name:"Urge",attributes:{theme_store_id:2213,schema_name:"Urge"}},{name:"Huge",attributes:{theme_store_id:2158,schema_name:"Huge"}},{name:"Vincent",attributes:{theme_store_id:2913,schema_name:"Vincent"}},{name:"Minion",attributes:{theme_store_id:1571,schema_name:"Minion"}},{name:"Area",attributes:{theme_store_id:2073,schema_name:"Area"}},{name:"Elysian",attributes:{theme_store_id:2578,schema_name:"Elysian"}},{name:"Brava",attributes:{theme_store_id:2148,schema_name:"Brava"}},{name:"Erickson",attributes:{theme_store_id:1790,schema_name:"Erickson"}},{name:"StyleScape",attributes:{theme_store_id:2238,schema_name:"StyleScape"}},{name:"Soul",attributes:{theme_store_id:2825,schema_name:"Soul"}},{name:"Emporium",attributes:{theme_store_id:1854,schema_name:"Emporium"}},{name:"Creator",attributes:{theme_store_id:1922,schema_name:"Creator"}},{name:"Palo Alto",attributes:{theme_store_id:777,schema_name:"Palo Alto"}},{name:"Zora",attributes:{theme_store_id:2505,schema_name:"Zora"}},{name:"Pipeline",attributes:{theme_store_id:739,schema_name:"Pipeline"}},{name:"Story",attributes:{theme_store_id:864,schema_name:"Story"}},{name:"Broadcast",attributes:{theme_store_id:868,schema_name:"Broadcast"}},{name:"Blockshop",attributes:{theme_store_id:606,schema_name:"Blockshop"}},{name:"Beyond",attributes:{theme_store_id:939,schema_name:"Beyond"}},{name:"Maker",attributes:{theme_store_id:765,schema_name:"Maker"}},{name:"Emerge",attributes:{theme_store_id:833,schema_name:"Emerge"}},{name:"Sahara",attributes:{theme_store_id:1926,schema_name:"Sahara"}},{name:"Mojave",attributes:{theme_store_id:1497,schema_name:"Mojave"}},{name:"Tailor",attributes:{theme_store_id:1457,schema_name:"Tailor"}},{name:"Startup",attributes:{theme_store_id:652,schema_name:"Startup"}},{name:"Editions",attributes:{theme_store_id:457,schema_name:"Editions"}},{name:"Taiga",attributes:{theme_store_id:1751,schema_name:"Taiga"}},{name:"Prestige",attributes:{theme_store_id:855,schema_name:"Prestige"}},{name:"Mono",attributes:{theme_store_id:1818,schema_name:"Mono"}},{name:"Monk",attributes:{theme_store_id:2515,schema_name:"Monk"}}],z=[{name:"Canopy",attributes:{theme_store_id:732,schema_name:"Canopy"}},{name:"Fetch",attributes:{theme_store_id:1949,schema_name:"Fetch"}},{name:"Expanse",attributes:{theme_store_id:902,schema_name:"Expanse"}}],G=[{name:"Avante",attributes:{theme_store_id:1667,schema_name:"Avante"}},{name:"Xtra",attributes:{theme_store_id:1609,schema_name:"Xtra"}},{name:"Paris",attributes:{theme_store_id:2702,schema_name:"Paris"}},{name:"Eclipse",attributes:{theme_store_id:3070,schema_name:"Eclipse"}},{name:"Luxe",attributes:{theme_store_id:2779,schema_name:"Luxe"}},{name:"Ignite",attributes:{theme_store_id:3027,schema_name:"Ignite"}},{name:"Zest",attributes:{theme_store_id:1611,schema_name:"Zest"}},{name:"Woodstock",attributes:{theme_store_id:2239,schema_name:"Woodstock"}},{name:"Symmetry",attributes:{theme_store_id:568,schema_name:"Symmetry"}},{name:"Sleek",attributes:{theme_store_id:2821,schema_name:"Sleek"}},{name:"District",attributes:{theme_store_id:735,schema_name:"District"}},{name:"Sitar",attributes:{theme_store_id:2599,schema_name:"Sitar"}},{name:"Concept",attributes:{theme_store_id:2412,schema_name:"Concept"}},{name:"Kairo",attributes:{theme_store_id:1843,schema_name:"Kairo"}},{name:"Exhibit",attributes:{theme_store_id:1828,schema_name:"Exhibit"}},{name:"Shapes",attributes:{theme_store_id:1535,schema_name:"Shapes"}},{name:"Cascade",attributes:{theme_store_id:859,schema_name:"Cascade"}},{name:"Label",attributes:{theme_store_id:773,schema_name:"Label"}},{name:"Venue",attributes:{theme_store_id:836,schema_name:"Venue"}},{name:"Creative",attributes:{theme_store_id:1829,schema_name:"Creative"}},{name:"Electro",attributes:{theme_store_id:2164,schema_name:"Electro"}},{name:"Shine",attributes:{theme_store_id:2576,schema_name:"Shine"}},{name:"Blum",attributes:{theme_store_id:1839,schema_name:"Blum"}},{name:"Parallax",attributes:{theme_store_id:688,schema_name:"Parallax"}},{name:"Veena",attributes:{theme_store_id:2566,schema_name:"Veena"}},{name:"Koto",attributes:{theme_store_id:3001,schema_name:"Koto"}},{name:"Piano",attributes:{theme_store_id:2812,schema_name:"Piano"}},{name:"Cello",attributes:{theme_store_id:2328,schema_name:"Cello"}},{name:"Viola",attributes:{theme_store_id:1701,schema_name:"Viola"}},{name:"King",attributes:{theme_store_id:2948,schema_name:"King"}},{name:"Shark",attributes:{theme_store_id:2619,schema_name:"Shark"}},{name:"Energy",attributes:{theme_store_id:2717,schema_name:"Energy"}},{name:"Igloo",attributes:{theme_store_id:2315,schema_name:"Igloo"}},{name:"Meka",attributes:{theme_store_id:2845,schema_name:"Meka"}},{name:"Providence",attributes:{theme_store_id:587,schema_name:"Providence"}},{name:"Amber",attributes:{theme_store_id:2217,schema_name:"Amber"}},{name:"Marble",attributes:{theme_store_id:1907,schema_name:"Marble"}},{name:"Sunrise",attributes:{theme_store_id:57,schema_name:"Sunrise"}},{name:"Unicorn",attributes:{theme_store_id:2264,schema_name:"Unicorn"}},{name:"Iris",attributes:{theme_store_id:2489,schema_name:"Iris"}},{name:"Divide",attributes:{theme_store_id:2273,schema_name:"Divide"}},{name:"Takeout",attributes:{theme_store_id:2534,schema_name:"Takeout"}},{name:"Aisle",attributes:{theme_store_id:2378,schema_name:"Aisle Theme"}},{name:"Noblesse",attributes:{theme_store_id:2546,schema_name:"Noblesse"}},{name:"Pesto",attributes:{theme_store_id:2275,schema_name:"Pesto"}},{name:"Satoshi",attributes:{theme_store_id:2881,schema_name:"Satoshi"}},{name:"Modules",attributes:{theme_store_id:1795,schema_name:"Modules"}},{name:"Bazaar",attributes:{theme_store_id:1448,schema_name:"Bazaar"}},{name:"Nimbus",attributes:{theme_store_id:3094,schema_name:"Nimbus"}},{name:"Eurus",attributes:{theme_store_id:2048,schema_name:"Eurus"}},{name:"Showcase",attributes:{theme_store_id:677,schema_name:"Showcase"}},{name:"Cama",attributes:{theme_store_id:2204,schema_name:"Cama"}},{name:"Vivid",attributes:{theme_store_id:2285,schema_name:"Vivid"}},{name:"Retro",attributes:{theme_store_id:2630,schema_name:"Retro"}},{name:"Local",attributes:{theme_store_id:1651,schema_name:"Local"}},{name:"Highlight",attributes:{theme_store_id:903,schema_name:"Highlight"}},{name:"Split",attributes:{theme_store_id:842,schema_name:"Split"}},{name:"Borders",attributes:{theme_store_id:2491,schema_name:"Borders"}},{name:"Combine",attributes:{theme_store_id:1826,schema_name:"Combine"}},{name:"Polyform",attributes:{theme_store_id:2493,schema_name:"Polyform"}},{name:"Noire",attributes:{theme_store_id:2926,schema_name:"Noire"}},{name:"Neat",attributes:{theme_store_id:1878,schema_name:"Neat"}},{name:"Nordic",attributes:{theme_store_id:2801,schema_name:"Nordic"}},{name:"Toyo",attributes:{theme_store_id:2358,schema_name:"Toyo"}},{name:"Mavon",attributes:{theme_store_id:1979,schema_name:"Mavon"}},{name:"Baseline",attributes:{theme_store_id:910,schema_name:"Baseline"}},{name:"Flow",attributes:{theme_store_id:801,schema_name:"Flow"}}],X=[{name:"Space",attributes:{theme_store_id:2659,schema_name:"Space"}},{name:"Keystone",attributes:{theme_store_id:2943,schema_name:"Keystone"}},{name:"Paper",attributes:{theme_store_id:1662,schema_name:"Paper"}},{name:"Machina",attributes:{theme_store_id:2883,schema_name:"Machina"}}],k=h=>{const e=window.Shopify.theme||{};return h==null?void 0:h.some(a=>Object.values(a.attributes).some(c=>Object.values(e).includes(c)))};class w{constructor(e){_(this,"thumbnail","https://cdn.shopify.com/s/files/1/1652/8827/files/g4990.png?v=1708754054");_(this,"infoPageLink","/pages/package-protection");_(this,"containers",new Map);_(this,"title","package title");_(this,"enabledDescription","enabled description");_(this,"disabledDescription","disabled description");_(this,"buttonColor","#22c55e");_(this,"checked",!1);_(this,"css","");_(this,"textAlign","left");this.api=e}formatPrice(e,t){return new Intl.NumberFormat("en-US",{style:"currency",maximumFractionDigits:2,minimumFractionDigits:2,currency:t}).format(e)}async getPrice(){const{coercedPrice:e}=await this.api.calculate(),t=await window.weNexusCartApi.get();return this.formatPrice(Number(e),t.currency)}getWidgetPrice(){let e="";return Array.from(document.querySelectorAll(".protection-price")).forEach(a=>{e=a==null?void 0:a.innerHTML}),Number(e.replace(/[^0-9.]/g,""))}async getDescription(){return`${this.checked?this.enabledDescription:this.disabledDescription}`}async getChecked(){return this.checked}async getCheckboxContainer(e,t){console.log("from basic");const a=document.createElement("div"),c=await this.getPrice(),m=await this.getDescription();a.insertAdjacentHTML("afterbegin",`
      <style>${this.css}</style>
        <div class="wenexus-package-protection__content">
            <div class="wenexus-package-protection__image">
                <img src="${this.thumbnail}" alt="logo" />
            </div>
            <div class="wenexus-package-protection__desc">
                <h5>${this.title} 
                ${this.infoPageLink?`<a href="https://${this.infoPageLink}" target="_blank" style="color:blue;">â“˜</a> `:""}
                </h5>
                <p> <span class="wenexus-package-protection-description">${m} </span></p>
            </div>
        </div>
        <div class="wenexus-package-protection__toggle" >
        
        <div style="position:relative;">
            <input type="checkbox" ${t?"checked":""} style="position:absolute; width:100%; height:100%; left:0; z-index:99; opacity:0; margin:0px; cursor:pointer; display: block; clip:unset;">

            <div class="toggle-container" style="display: flex;  width: 35px; height: 13px; background-color: ${t?this.buttonColor:"#7b7b7b"}; position: relative; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); border-radius: 9999px; cursor: pointer; transition: background-color 0.5s ease-out;">
                <span class="toggle-switch" style="height: 11px; width: 11px; position: absolute; top: 1.3px; left: 2px; background-color: white; border-radius: 9999px; ${t?"transform: translateX(20px);":""} transition: all 0.3s ease-out; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); display: flex; align-items: center; justify-content: center;"></span>
            </div>
          <p style="margin:0px; font-size:10px; text-align:center;"><strong class="protection-price">${c}</strong></p>
            </div>
        </div>
      `);const i=a.querySelector(".wenexus-package-protection__toggle input"),o=a.querySelector(".toggle-container"),r=a.querySelector(".toggle-switch");a.className="wenexus-package-protection",i.addEventListener("click",()=>{s(),this.checked=i.checked});const s=()=>{o.style.backgroundColor=i.checked?this.buttonColor:"#7b7b7b",r.style.transform=i.checked?"translateX(20px)":"translateX(0)"};return s(),this.containers.set(e,a),{container:a,checkbox:i}}async getStyleMarkup({accentColor:e,imageWidth:t=56,containerGap:a=[0,10],contentGap:c=[0,10],descriptionFontWeight:m="bold",descriptionMargin:i=[0,0,0,0],hideDescriptionPage:o=!0,containerMargin:r=[0,0,8,0],containerJustify:s="end",extraStyles:n="",textAlign:l="left",containerMaxWidth:d="100%"}){return`
      <style>
         .wenexus-package-protection {
            display: flex;
            justify-content: ${s};
            align-items: center;
            margin: ${r==null?void 0:r.join("px ")};
            gap: ${a[0]} ${a[1]}px;
           
         }
         
         .wenexus-package-protection__content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: ${c[0]} ${c[1]}px;
           
         }
         
         .wenexus-package-protection__image {
            max-width: ${t}px;
            max-height: ${t}px;

         }
         
         .wenexus-package-protection__image img {
            width: 100%;
         }
         .wenexus-package-protection__desc{
            text-align: ${l};
            max-width: ${d};
         }

         .wenexus-package-protection__desc h5 {
            font-size:16px;
            margin: 0;
         }
         
         .wenexus-package-protection__desc p {
           
            font-size: 13px;
            font-weight: ${m};
            margin: ${i==null?void 0:i.join("px ")}px;
         }
         
         .wenexus-package-protection__desc a {
            text-decoration: none;
            font-size:inherit;
            outline: 0;
            color: #222;
            transition: .3s;
            ${o?"display: none;":""}
         }
         
         .wenexus-package-protection__toggle {
            accent-color: ${e} !important;
            zoom: 1.55;
         }
         
         ${n}
      </style>`}getInsertionPointSelectors(){return[{selector:'button[type="submit"][name="checkout"]',insertPosition:"before"}]}async refreshPriceUI(){this.containers.forEach(async e=>{e.querySelector(".protection-price").textContent=await this.getPrice()})}async refreshWidget(){}disabledCheckoutButton(){document.querySelectorAll("[name='checkout']").forEach(t=>{t.disabled=!0})}enabledCheckoutButton(){document.querySelectorAll("[name='checkout']").forEach(t=>{t.disabled=!1})}cartUpdate(){}cartBubble(){}}class K extends w{constructor(){super(...arguments);_(this,"thumbnail","https://cdn.shopify.com/s/files/1/0010/3134/0085/files/pp-caliconnected.png?v=1716625753")}static shouldUse(){return k(C)}getInsertionPointSelectors(t,a){return[{selector:a??".cart__ctas",insertPosition:t??"before"},{selector:".cart-notification__links",insertPosition:"before",boundaryParents:new Set(Array.from(document.querySelectorAll("cart-notification")))},{selector:".button-container",insertPosition:"before"},{selector:".cart-preview__btns-wrap",insertPosition:"before"}]}async getStyleMarkup(t){return super.getStyleMarkup({imageWidth:66,containerMargin:[10,0,12,0],containerJustify:"space-between",titleFontSize:1.8,descriptionFontSize:1.1,hideDescriptionPage:!1,descriptionMargin:[2,0,0,0],...t,accentColor:"#2c7e3f"})}async refreshWidget(){console.log("free theme");let t=document.querySelectorAll(".totals__total-value, .totals, .cart-preview__total-price-value");const a=await window.weNexusCartApi.get();setTimeout(()=>{const c=this.getWidgetPrice(),m=localStorage.getItem("package-protection-enabled");let i="";m==="true"?(i=this.enabledDescription,Array.from(t).forEach(r=>r.innerHTML=`${this.formatPrice(Number(a.total_price/100+c),a.currency)} ${a.currency}`)):(i=this.disabledDescription,Array.from(t).forEach(r=>r.innerHTML=`${this.formatPrice(Number(a.total_price/100),a.currency)} ${a.currency}`));const o=document.getElementsByClassName("wenexus-package-protection-description");Array.from(o).forEach(r=>r.innerHTML=`${i} `)},500)}cartUpdate(){console.log("free theme"),Array.from(document.getElementsByTagName("cart-items")).forEach(t=>t.onCartUpdate()),Array.from(document.getElementsByTagName("cart-drawer-items")).forEach(t=>t.onCartUpdate())}async cartBubble(){const t=(await window.weNexusCartApi.get()).item_count;let a=document.getElementsByClassName("cart-count-bubble");Array.from(a).forEach(c=>{c.childNodes.forEach(m=>{m.innerHTML&&(m.innerHTML=t.toString())})})}}class J extends w{constructor(){super(...arguments);_(this,"thumbnail","https://cdn.shopify.com/s/files/1/0010/3134/0085/files/pp-caliconnected.png?v=1716625753")}static shouldUse(){return k(R)}getInsertionPointSelectors(){return[{selector:"button[name='checkout']",insertPosition:"before"}]}async getStyleMarkup(t){return super.getStyleMarkup({imageWidth:66,containerMargin:[10,0,12,0],containerJustify:"end",titleFontSize:1,descriptionFontSize:.8,hideDescriptionPage:!1,descriptionMargin:[2,0,0,0],containerMaxWidth:"250px",...t,accentColor:"#2c7e3f"})}doesCheckoutContainSubtotal(t){if(!t)return!1;const a=/checkout/i,c=/\b\d+(\.\d{2})?\b/;return a.test(t)&&c.test(t)}async refreshWidget(){console.log("enterpriseTheme");const t=[".cart__summary div p",'button[name="checkout"]'],a=await window.weNexusCartApi.get(),c=(m=0)=>{t.forEach(i=>{let o=document.querySelector(i);if(o&&this.doesCheckoutContainSubtotal(o.textContent)){o.textContent="Checkout - "+this.formatPrice(Number(a.total_price/100+m),a.currency);return}o&&o.lastElementChild?o.lastElementChild.innerHTML="Checkout - "+this.formatPrice(Number(a.total_price/100+m),a.currency):o&&(o.innerHTML=this.formatPrice(Number(a.total_price/100+m),a.currency))})};setTimeout(()=>{const m=this.getWidgetPrice(),i=localStorage.getItem("package-protection-enabled");let o="";i==="true"?(o=this.enabledDescription,c(m),c(m)):(o=this.disabledDescription,c(),c());const r=document.getElementsByClassName("wenexus-package-protection-description");Array.from(r).forEach(s=>s.innerHTML=`${o} `)},500)}cartUpdate(){window.location.reload()}}class Q extends w{static shouldUse(){return k(q)}getInsertionPointSelectors(){return[{selector:".footer-ctas",insertPosition:"before"},{selector:"cart-drawer-buttons-block",insertPosition:"before"},{selector:".cart-buttons",insertPosition:"before"},{selector:".cart__ctas",insertPosition:"before"},{selector:".cart-summary__button",insertPosition:"before"},{selector:".cart-submit",insertPosition:"before"},{selector:".cart-drawer__checkout-buttons",insertPosition:"before"},{selector:".cart-drawer__footer  p.rte",insertPosition:"before"},{selector:".drawer__footer details",insertPosition:"before"},{selector:'.cart__summary button[name="checkout"]',insertPosition:"before"},{selector:".checkout-buttons",insertPosition:"before"},{selector:".f-cart-drawer__buttons",insertPosition:"before"},{selector:".drawer__footer-buttons",insertPosition:"before"},{selector:".cart__footer--buttons",insertPosition:"before"},{selector:"#CartDetails",insertPosition:"before"},{selector:"main.drawer__inner.min-h-0.h-full small.text-caption",insertPosition:"after"},{selector:"div.py-24.flex div.md\\:ml-auto.max-sm\\:w-full div.flex.flex-col.items-end.gap-8 button",insertPosition:"before"},{selector:"form.f8vl.f8vl-initialized p.link-btn.text-justify",insertPosition:"before"},{selector:"fieldset aside p.link-btn.wide",insertPosition:"before"},{selector:".cart-checkout-container",insertPosition:"before"},{selector:"div.cart-purchase__checkout-section div.bottom-cart-wrapper",insertPosition:"before"},{selector:"div.mini-cart__footer div.cart-summary__meta a.button",insertPosition:"before"},{selector:'form.cart__wrapper div.cart-summary .cart-summary__buttons button[name="checkout"]',insertPosition:"before"},{selector:"form#cart button#cart-notification-checkout",insertPosition:"before"},{selector:"form.ajax-cart__cart-form.grid__wrapper.narrow.mb4.js-cart-form div.ajax-cart__buttons",insertPosition:"before"},{selector:"form.ajax-cart__cart-form.grid__wrapper.edge.js-cart-form div.ajax-cart__buttons",insertPosition:"before"},{selector:".theme-button--secondary",insertPosition:"before"},{selector:".ajaxcart__footer",insertPosition:"before"},{selector:".cart__buttons-container",insertPosition:"before"},{selector:".cart-template__footer-actions",insertPosition:"before"},{selector:".cart__footer-actions",insertPosition:"before"},{selector:".quick-cart__total",insertPosition:"after"},{selector:".cart-drawer__footer--buttons",insertPosition:"before"},{selector:".checkout-btns",insertPosition:"before"},{selector:".cart-drawer-buttons",insertPosition:"before"},{selector:".proceed-to-checkout",insertPosition:"before"},{selector:".cart-drawer--buttons-container",insertPosition:"before"},{selector:".thb-cart-form--proceed",insertPosition:"before"},{selector:".mini-cart__buttons",insertPosition:"before"},{selector:".cart-ctas",insertPosition:"before"},{selector:".mini-cart-footer-actions",insertPosition:"before"},{selector:".cart-template__checkout-buttons",insertPosition:"before"},{selector:".add-to-cart-wrap",insertPosition:"before"},{selector:".drawer__footer-actions",insertPosition:"before"},{selector:".cart__checkout",insertPosition:"before"},{selector:".cart-sidebar__footer-actions",insertPosition:"before"},{selector:".cart-modal-buttons",insertPosition:"before"},{selector:"add-order-note",insertPosition:"after"},{selector:".main-cart__footer__fine-print",insertPosition:"after"},{selector:".header-minicart-footer-wrapper",insertPosition:"before"},{selector:".sticky-menu-buttons-slideout-closed",insertPosition:"before"},{selector:'button[aria-label="Agree to Terms"]',insertPosition:"before"},{selector:".cart-drawer__action-buttons",insertPosition:"before"},{selector:".cart-mini-actions",insertPosition:"before"},{selector:".cart-checkout",insertPosition:"before"},{selector:".mini-cart__button-container",insertPosition:"before"},{selector:".cart-recap__notices",insertPosition:"after"},{selector:".buy-buttons--compact",insertPosition:"before"},{selector:'button[form="mini-cart-form"]',insertPosition:"before"},{selector:".cart-btn",insertPosition:"before"},{selector:".cart-btn-container",insertPosition:"before"},{selector:".xo-cart-mini-footer__group",insertPosition:"before"},{selector:'xo-cart-will-change button[type="submit"][name="checkout"]',insertPosition:"before"},{selector:'.checkout-row input[type="submit"][name="checkout"]',insertPosition:"before"},{selector:".overlay-buy_button",insertPosition:"before"}]}async refreshWidget(){console.log("universal-1");const e=[".cart-details-footer",".cart-drawer-subtotal__main-content",".cart-subtotal",".drawer__footer__inner",".cart__footer",".cart-summary__total-price-row",".drawer__footer",".subtotal-row",".cart-drawer__summary","div[data-cart-footer]",".cart__summary",".cart-drawer__footer",".checkout-subtotal-container__right",".f-cart-drawer__subtotal-value",".drawer__footer-body",".cart__details--row",".cart__details","#CartTotal","form.sticky-in-panel ","ul.l4tt.m15.form-group ","fieldset aside ul.l4tt.form-group","form.f8vl.f8vl-initialized ul.l4tt.form-group","div.cart-notification__links","div.ajax-cart__final-details","div.cart-purchase__buttons","div#CartDrawer","div#main-cart-footer",".cart-sidebar__footer",".mini-cart__footer",".cart-summary",".ajaxcart__footer",".cart__blocks",".cart-template__footer",".quick-cart__footer",".cart__subtotal",".cart-drawer__subtotal",".cart-total-box",".mini-cart__total",".cart-drawer--footer",".thb-cart-form--cart-collaterals",".side-panel-footer",".cart-total",".cart-footer",".mini-cart-footer",".cart-drawer__cart-total",".cart-template__cart-total",".cart-page__block-container",".cart-sidebar__footer",".cart-totals",".sub-total",".main-cart__footer__total",".header-minicart-footer-wrapper",".sticky-menu container","#total-bottom",".money[data-cart-total]",".cart-mini-subtotal",".checkout-subtotal-container",".cart-total-item",".totle-price","#mini-cart-toggle",'div[slot="footer"]',"safe-sticky",".mini-cart__recap",".card__section",'button[form="mini-cart-form"]',".cart__recap",".xo-cart-totals",".xo-cart-mini-footer__price",".cart-total-price",".cart-form__totals",'button[type="submit"][name="checkout"]'],t=await window.weNexusCartApi.get(),a=document.querySelector('.wenexus-package-protection__toggle input[type="checkbox"]');a&&a.classList.add("product-variant__input"),(()=>{const i=document.querySelector("div.ajax-cart__summary-wrapper.js-cart-summary");i&&(i.style.display="unset")})();const m=(i=0)=>{e.forEach(o=>{let r=document.querySelectorAll(o);function s(n){const l=Number(t.items_subtotal_price/100).toFixed(2),d=Number(t.items_subtotal_price/100+i).toFixed(2);if((n==null?void 0:n.nodeType)===(Node==null?void 0:Node.TEXT_NODE))if(i===0){const p=localStorage.getItem("items_subtotal_price");n.textContent=n.textContent.replace(new RegExp(`\\b${p}\\b`,"g"),d)}else localStorage.setItem("items_subtotal_price",d),n.textContent=n.textContent.replace(new RegExp(`\\b${l}\\b`,"g"),d);else(n==null?void 0:n.nodeType)===(Node==null?void 0:Node.ELEMENT_NODE)&&Array.from(n.childNodes).forEach(s)}r.forEach(n=>{s(n)})})};setTimeout(()=>{const i=this.getWidgetPrice(),o=localStorage.getItem("package-protection-enabled");let r="";o==="true"?(r=this.enabledDescription,m(i),m(i)):(r=this.disabledDescription,m(),m());const s=document.getElementsByClassName("wenexus-package-protection-description");Array.from(s).forEach(n=>n.innerHTML=`${r} `)},500)}cartUpdate(){window.location.reload()}}class Z extends w{static shouldUse(){return k(O)}async refreshWidget(){console.log("universal-for-sub-1");const e=[".wt-cart__footer",".wt-cart__footer__body","#main-cart-footer",".drawer__footer",".cart__footer-inner",".quick-cart__footer","cart-footer",'button[type="submit"][name="checkout"]',".cart__footer","form.sticky-cart__inner","form#CartPageForm",".cart-total-box",".cart-drawer__container",".cart-template__summary",".cart-footer__summary",".cart-drawer__bottom",".total-holder",".main-cart_cart-totals-wrap",".cart-drawer_foot-wrap",".main-cart_widget--totals",".accordion-wrap",".shopping-cart",".template__cart__footer",".cart-table__checkoutWrp",".cart-subtotal",'div[data-element="subtotal-block"]',"#cart-drawer-live-region-subtotal","div[data-cart-subtotal-block]","subtotal-price",".cart-footer__subtotal",".cart-totals",".order-summary-card",".more",".subtotal",".subtotal .money ",".cart-drawer-footer-total",".CartDrawer__Total",".Cart__Total",".cart-header-details",".sub--total-cart",".items-baseline",".cart-drawer__totals","#cart-subtotal",".cart__total",".cart--total-price",".cart__summary-total",".cart-drawer__summary-total",".cart-items__total",".cart-drawer__total",".cart__subtotal",".totals__subtotal-value","#CartDetails",".cart__footer ",".cart-summary-line",".cart__details",".cart-recap",".cart-count",".cart-total-price"],t=await window.weNexusCartApi.get(),a=(c=0)=>{e.forEach(m=>{let i=document.querySelectorAll(m);function o(r){const s=Number(t.items_subtotal_price/100).toFixed(2),n=Number(t.items_subtotal_price/100+c).toFixed(2);if((r==null?void 0:r.nodeType)===(Node==null?void 0:Node.TEXT_NODE))if(c===0){const l=localStorage.getItem("items_subtotal_price");r.textContent=r.textContent.replace(new RegExp(`\\b${l}\\b`,"g"),n)}else localStorage.setItem("items_subtotal_price",n),r.textContent=r.textContent.replace(new RegExp(`\\b${s}\\b`,"g"),n);else(r==null?void 0:r.nodeType)===(Node==null?void 0:Node.ELEMENT_NODE)&&Array.from(r.childNodes).forEach(o)}i.forEach(r=>{o(r)})})};setTimeout(()=>{const c=this.getWidgetPrice(),m=localStorage.getItem("package-protection-enabled");let i="";m==="true"?(i=this.enabledDescription,a(c),a(c)):(i=this.disabledDescription,a(),a());const o=document.getElementsByClassName("wenexus-package-protection-description");Array.from(o).forEach(r=>r.innerHTML=`${i} `)},500)}cartUpdate(){window.location.reload()}}class Y extends w{static shouldUse(){return k(G)}getInsertionPointSelectors(){return document.querySelectorAll('button[name="checkout"][type="submit"], input[name="checkout"][type="submit"],button[name="checkout"], a[href="/checkout"], input[type="submit"][value="Checkout"]').forEach(t=>{t.parentElement&&t.parentElement.classList.add("wenexus-theme-support")}),[{selector:".wenexus-theme-support",insertPosition:"before"}]}async refreshWidget(){console.log("switch-1");const e=["div[data-cart-footer]",'span[x-html="formatMoney(state.total_price)"]',"#main-cart-footer",".cart__controls",".cart__footer-inner",".cart-drawer__text",".cart-amount",".cart-drawer__footer",".subtotal_amount",".cart__item-subtotal",".cart-drawer-price-total",".cart-summary-price","div.total.row","cart-dynamic.flex.gap-4.flex-col",'div[x-show="cart.total_price > 0"]',".drawer-inner__footer",".cart-form__footer",".minicart-top__wrapper",".cart-footer_wrapper",".cart-popup__footer",".f-drawer__footer",".totals",".cart-summary ",".cart-tot2",".cart-drawer-footer","p[data-cart-subtotal]",".liveCartFooter",".table-container",".product-price",".vendors",".subtotal .theme-money",".cart-total",'data-island[x-data="CartFooter"]',".cart__total",".cart__footer ","#CartTotal","cart-dynamic",".sub-total",".cart-totals",".total-amount",".wbcarthtotal",".totals__subtotal-value",".cart-drawer__subtotal","./"],t=await window.weNexusCartApi.get();Array.from(document.querySelectorAll(".cart-drawer__text")).forEach(m=>{m.style.marginBottom="70px"});const c=(m=0)=>{e.forEach(i=>{let o=document.querySelectorAll(i);function r(s){const n=Number(t.items_subtotal_price/100).toFixed(2),l=Number(t.items_subtotal_price/100+m).toFixed(2);if((s==null?void 0:s.nodeType)===(Node==null?void 0:Node.TEXT_NODE))if(m===0){const d=localStorage.getItem("items_subtotal_price");s.textContent=s.textContent.replace(new RegExp(`\\b${d}\\b`,"g"),l)}else localStorage.setItem("items_subtotal_price",l),s.textContent=s.textContent.replace(new RegExp(`\\b${n}\\b`,"g"),l);else(s==null?void 0:s.nodeType)===(Node==null?void 0:Node.ELEMENT_NODE)&&Array.from(s.childNodes).forEach(r)}o.forEach(s=>{r(s)})})};setTimeout(()=>{const m=this.getWidgetPrice(),i=localStorage.getItem("package-protection-enabled");let o="";i==="true"?(o=this.enabledDescription,c(m),c(m)):(o=this.disabledDescription,c(),c());const r=document.getElementsByClassName("wenexus-package-protection-description");Array.from(r).forEach(s=>s.innerHTML=`${o} `)},500)}cartUpdate(){window.location.reload()}}class ee extends w{constructor(){super(...arguments);_(this,"thumbnail","https://cdn.shopify.com/s/files/1/0010/3134/0085/files/pp-caliconnected.png?v=1716625753")}static shouldUse(){return k(z)}getInsertionPointSelectors(){return[{selector:'button[name="checkout"]',insertPosition:"before"}]}async getStyleMarkup(t){return super.getStyleMarkup({imageWidth:66,containerMargin:[10,0,12,0],containerJustify:"end",titleFontSize:1,descriptionFontSize:.8,hideDescriptionPage:!1,descriptionMargin:[2,0,0,0],containerMaxWidth:"250px",...t,accentColor:"#2c7e3f"})}async refreshWidget(){console.log("exponent subtotal theme");const t=["div.cart-drawer__summary.relative.cart-drawer__summary--top.cart-drawer--checkout--sticky-true.cart-drawer--checkout--sticky-desktop-true.cart-drawer--checkout--sticky-mobile-true div.flex.flex-wrap.justify-between.items-center.mb-4 div.font-bold",".cart__summary div.flex.justify-between.items-center p.mb-0.font-bold",".cart__summary div.flex.justify-between.items-center.mt-6 p.font-bold","div.cart__item-sub.cart__item-row.cart__item--subtotal span[aria-hidden='true']"],a=await window.weNexusCartApi.get(),c=(m=0)=>{t.forEach(i=>{let o=document.querySelector(i);if(o){const s=this.formatPrice(Number(a.total_price/100+m),a.currency).split(".");o.innerHTML=`${s[0]}<sup>${s[1]}</sup> ${a.currency}`}})};setTimeout(()=>{const m=this.getWidgetPrice(),i=localStorage.getItem("package-protection-enabled");let o="";i==="true"?(o=this.enabledDescription,c(m),c(m)):(o=this.disabledDescription,c(),c());const r=document.getElementsByClassName("wenexus-package-protection-description");Array.from(r).forEach(s=>s.innerHTML=`${o} `)},500)}cartUpdate(){window.location.reload()}}class te extends w{constructor(){super(...arguments);_(this,"thumbnail","https://cdn.shopify.com/s/files/1/0010/3134/0085/files/pp-caliconnected.png?v=1716625753")}static shouldUse(){return k(U)}getInsertionPointSelectors(){return[{selector:"button[name='checkout']",insertPosition:"before"},{selector:".cart-buttons",insertPosition:"before"}]}async getStyleMarkup(t){return super.getStyleMarkup({imageWidth:66,containerMargin:[10,0,12,0],containerJustify:"end",titleFontSize:1,descriptionFontSize:.8,hideDescriptionPage:!1,descriptionMargin:[2,0,0,0],containerMaxWidth:"250px",...t,accentColor:"#2c7e3f"})}async refreshWidget(){console.log("kingdomTheme");const t=["#CartTotal strong",".cart-summary-line"],a=await window.weNexusCartApi.get(),c=(m=0)=>{t.forEach(i=>{let o=document.querySelector(i);o&&o.lastElementChild?o.lastElementChild.innerHTML="SUBTOTAL "+this.formatPrice(Number(a.total_price/100+m),a.currency):o&&(o.innerHTML=this.formatPrice(Number(a.total_price/100+m),a.currency))})};setTimeout(()=>{const m=this.getWidgetPrice(),i=localStorage.getItem("package-protection-enabled");let o="";i==="true"?(o=this.enabledDescription,c(m),c(m)):(o=this.disabledDescription,c(),c());const r=document.getElementsByClassName("wenexus-package-protection-description");Array.from(r).forEach(s=>s.innerHTML=`${o} `)},500)}cartUpdate(){window.location.reload()}}class ae extends w{constructor(){super(...arguments);_(this,"thumbnail","https://cdn.shopify.com/s/files/1/0010/3134/0085/files/pp-caliconnected.png?v=1716625753")}static shouldUse(){return k(j)}getInsertionPointSelectors(){return[{selector:".cart-buttons",insertPosition:"before"},{selector:".cart-buttons-container",insertPosition:"before"},{selector:"div.shipping_msg.bottompad-half.clearfix shipping-message",insertPosition:"after"},{selector:".cart__aside-inner button[type='submit'].cart__checkout-button",insertPosition:"before"},{selector:'button[form="mini-cart-form"][type="submit"]',insertPosition:"before"}]}async getStyleMarkup(t){return super.getStyleMarkup({imageWidth:66,containerMargin:[10,0,12,0],containerJustify:"end",titleFontSize:1,descriptionFontSize:.8,hideDescriptionPage:!1,descriptionMargin:[2,0,0,0],containerMaxWidth:"250px",...t,accentColor:"#2c7e3f"})}doesSelectorContainSubtotal(t){return t?/\b\d+(\.\d{2})?\b/.test(t):!1}doesSelectorContainCheckoutWord(t){return/(\d{4})\b/.test(t)}async refreshWidget(){console.log("Toyo theme"),document.querySelectorAll(".wenexus-package-protection span.toggle-switch").forEach(i=>{i.style.padding="0"});const a=[".cart-total-price",".cart-price",".cartTotalSelector","#total-cart-top",".cart__total-container span:nth-of-type(2)",'button[form="mini-cart-form"][type="submit"]'],c=await window.weNexusCartApi.get(),m=(i=0)=>{a.forEach(o=>{const r=n=>{if(console.log(this.doesSelectorContainCheckoutWord(n.textContent)),n&&this.doesSelectorContainSubtotal(n.textContent)){if(n.tagName==="BUTTON"&&window.Shopify.theme.schema_name==="Focal"){const d=this.formatPrice(Number(c.total_price/100+i),c.currency);n.innerHTML=`
               <span class="checkout-button__lock"><svg focusable="false" width="17" height="17" class="icon icon--lock   " viewBox="0 0 17 17">
                <path d="M2.5 7V15H14.5V7H2.5Z" stroke="currentColor" stroke-width="1.5" fill="none"></path>
                <path d="M5.5 4C5.5 2.34315 6.84315 1 8.5 1V1C10.1569 1 11.5 2.34315 11.5 4V7H5.5V4Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"></path>
                <circle cx="8.5" cy="11" r="0.5" stroke="currentColor"></circle>
              </svg></span>Checkout<span class="square-separator"></span>${d}</button>
              `;return}const l=n.textContent;if(this.doesSelectorContainCheckoutWord(l)){console.log(l),n.textContent="Checkout -"+this.formatPrice(Number(c.total_price/100+i),c.currency)+" "+c.currency;return}n.textContent=this.formatPrice(Number(c.total_price/100+i),c.currency)+" "+c.currency;return}};document.querySelectorAll(o).forEach(n=>{r(n)})})};setTimeout(()=>{const i=this.getWidgetPrice(),o=localStorage.getItem("package-protection-enabled");let r="";o==="true"?(r=this.enabledDescription,m(i),m(i)):(r=this.disabledDescription,m(),m());const s=document.getElementsByClassName("wenexus-package-protection-description");Array.from(s).forEach(n=>n.innerHTML=`${r} `)},500)}cartUpdate(){window.location.reload()}}class re extends w{constructor(){super(...arguments);_(this,"thumbnail","https://cdn.shopify.com/s/files/1/0010/3134/0085/files/pp-caliconnected.png?v=1716625753")}static shouldUse(){return k(X)}getInsertionPointSelectors(){return[{selector:"[name='checkout']",insertPosition:"before"},{selector:"div.cart__blocks cart-note",insertPosition:"after"},{selector:".cart-buttons",insertPosition:"before"}]}async getStyleMarkup(t){return super.getStyleMarkup({imageWidth:66,containerMargin:[10,0,12,0],containerJustify:"end",titleFontSize:1,descriptionFontSize:.8,hideDescriptionPage:!1,descriptionMargin:[2,0,0,0],containerMaxWidth:"250px",...t,accentColor:"#2c7e3f"})}async refreshWidget(){console.log("Space theme");const t=[".cart-details-footer",".cart-drawer-subtotal__main-content","div.border--b-width.w-full.p-4.color__bg-tertiary.color__tertiary.color__border-divider-1",'button[name="checkout"]',"aside",'input[name="checkout"]',".cart-total-price",".cart__footer",".cart_notification_links_inner"],a=await window.weNexusCartApi.get(),c=document.querySelector('.wenexus-package-protection__toggle input[type="checkbox"]');c&&c.classList.add("product-variant__input"),(()=>{const o=document.querySelector("div.ajax-cart__summary-wrapper.js-cart-summary");o&&(o.style.display="unset")})();const i=(o=0)=>{t.forEach(r=>{let s=document.querySelectorAll(r);function n(l){const d=Number(a.items_subtotal_price/100).toFixed(2),p=Number(a.items_subtotal_price/100+o).toFixed(2),M=()=>{if(console.log("node element is input"),o===0){const S=localStorage.getItem("items_subtotal_price"),T=l.getAttribute("value");if(!T)return;const F=T.replace(new RegExp(`\\b${S}\\b`,"g"),p);l.setAttribute("value",F)}else{localStorage.setItem("items_subtotal_price",p);const S=l.getAttribute("value");if(!S)return;const T=S.replace(new RegExp(`\\b${d}\\b`,"g"),p);l.setAttribute("value",T)}};if(l.tagName==="INPUT"){M();return}if((l==null?void 0:l.nodeType)===(Node==null?void 0:Node.TEXT_NODE))if(o===0){const S=localStorage.getItem("items_subtotal_price");l.textContent=l.textContent.replace(new RegExp(`\\b${S}\\b`,"g"),p)}else localStorage.setItem("items_subtotal_price",p),l.textContent=l.textContent.replace(new RegExp(`\\b${d}\\b`,"g"),p);else(l==null?void 0:l.nodeType)===(Node==null?void 0:Node.ELEMENT_NODE)&&Array.from(l.childNodes).forEach(n)}s.forEach(l=>{n(l)})})};setTimeout(()=>{const o=this.getWidgetPrice(),r=localStorage.getItem("package-protection-enabled");let s="";r==="true"?(s=this.enabledDescription,i(o),i(o)):(s=this.disabledDescription,i(),i());const n=document.getElementsByClassName("wenexus-package-protection-description");Array.from(n).forEach(l=>l.innerHTML=`${s} `)},500)}cartUpdate(){window.location.reload()}}class oe extends w{static shouldUse(){return k(H)}getInsertionPointSelectors(){return[{selector:'button[name="checkout"][type="submit"]',insertPosition:"before"}]}async refreshWidget(){console.log("impact-1");const e=[".cart-form__totals",'button[type="submit"][name="checkout"]','div[slot="footer"]'],t=await window.weNexusCartApi.get(),a=document.querySelector('.wenexus-package-protection__toggle input[type="checkbox"]');a&&a.classList.add("product-variant__input"),(()=>{const i=document.querySelector("div.ajax-cart__summary-wrapper.js-cart-summary");i&&(i.style.display="unset")})();const m=(i=0)=>{e.forEach(o=>{let r=document.querySelectorAll(o);function s(n){const l=Number(t.items_subtotal_price/100).toFixed(2),d=Number(t.items_subtotal_price/100+i).toFixed(2);if((n==null?void 0:n.nodeType)===(Node==null?void 0:Node.TEXT_NODE))if(i===0){const p=localStorage.getItem("items_subtotal_price");n.textContent=n.textContent.replace(new RegExp(`\\b${p}\\b`,"g"),d)}else localStorage.setItem("items_subtotal_price",d),n.textContent=n.textContent.replace(new RegExp(`\\b${l}\\b`,"g"),d);else(n==null?void 0:n.nodeType)===(Node==null?void 0:Node.ELEMENT_NODE)&&Array.from(n.childNodes).forEach(s)}r.forEach(n=>{s(n)})})};setTimeout(()=>{const i=this.getWidgetPrice(),o=localStorage.getItem("package-protection-enabled");let r="";o==="true"?(r=this.enabledDescription,m(i),m(i)):(r=this.disabledDescription,m(),m());const s=document.getElementsByClassName("wenexus-package-protection-description");Array.from(s).forEach(n=>n.innerHTML=`${r} `)},500)}cartUpdate(){window.location.reload()}}(function(){async function h(){var V,B,L,W;const e=window.WeNexusShipGuardPackageProtectionSettings,a=[K,J,Q,Z,Y,ee,te,ae,re,oe,w].find(u=>u.shouldUse?u.shouldUse():!0);if(!a)return console.error("No package protection client found");const c=async()=>(await window.weNexusCartApi.get()).items;let m=await c();const i=(B=(V=window.WeNexusShipGuardPackageProtectionSettings)==null?void 0:V.packageProtectionProductAndVariants)==null?void 0:B.map(u=>u.excludedPackageProtectionVariants.map(b=>Number(b.id.replace("gid://shopify/ProductVariant/","")))).flat(),o=async()=>{const u=await c(),b=[];for(let f=0;f<u.length;f++){const y=u[f].variant_id;i!=null&&i.includes(y)||u[f].sku!=="wenexus-shipping-protection"&&b.push(u[f])}return b},r=(e==null?void 0:e.insuranceDisplayButton)??!1,s=()=>{const u=localStorage.getItem("package-protection-enabled");return u==="false"?!1:u==="true"?!0:u===null?(localStorage.setItem("package-protection-enabled",r.toString()),r):u==="true"},n=new g(Number(e==null?void 0:e.percentage),s()),l=new a(n);let d=[];e!=null&&e.defaultSetting?d=((W=l.getInsertionPointSelectors)==null?void 0:W.call(l,"before"))||[]:d=((L=l.getInsertionPointSelectors)==null?void 0:L.call(l,(e==null?void 0:e.position.toLowerCase())??"before",e==null?void 0:e.cssSelector))||[];const p=e==null?void 0:e.fixedMultiplePlan,M=e==null?void 0:e.productVariants,S=p==null?void 0:p.map(u=>{const b=M==null?void 0:M.find(f=>Number(f.price)===Number(u.protectionFees));return b?{max:Number(u.cartMaxPrice),min:Number(u.cartMinPrice),variantId:Number(b.id),price:Number(b.price)}:null}).filter(u=>u!==null);if((e==null?void 0:e.insurancePriceType)==="FIXED_MULTIPLE")n.setVariants(x.BASED_ON_CART_VALUE,S);else if((e==null?void 0:e.insurancePriceType)==="FIXED_PRICE"){const u=e==null?void 0:e.productVariants[0];n.setVariants(x.FIXED,{price:Number(u.price),variantId:Number(u.id)})}else(e==null?void 0:e.insurancePriceType)==="PERCENTAGE"&&n.setVariants(x.PERCENTAGE,e==null?void 0:e.productVariants.reduce((u,b)=>(u[b.price]=Number(b.id),u),{}));l.thumbnail=e==null?void 0:e.iconUrl,l.title=e==null?void 0:e.title,l.enabledDescription=e==null?void 0:e.enabledDescription,l.disabledDescription=e==null?void 0:e.disabledDescription,l.buttonColor=e==null?void 0:e.switchColor,l.css=e==null?void 0:e.css,l.infoPageLink=e==null?void 0:e.policyUrl,l.checked=s(),typeof l.getStyleMarkup=="function"&&document.head.insertAdjacentHTML("beforeend",await l.getStyleMarkup({accentColor:"#52c939",imageWidth:48}));const T=()=>{window.addEventListener("pageshow",function(u){var b=u.persisted||typeof window.performance<"u"&&window.performance.navigation.type===2;b&&window.location.reload()})};new window.WeNexusQuerySelectorLive("form[action='/cart']").addListener(async u=>{l.cartBubble(),l.refreshWidget();const b=await o();let f=!1;Array.from(u).forEach(y=>{y.addEventListener("keydown",P=>{P.key==="Enter"&&P.preventDefault()}),y.addEventListener("submit",async P=>{f||(P.preventDefault(),l.disabledCheckoutButton(),f=!0,s()&&b.length>0?await n.add():await n.remove(),T(),window.location.href="/checkout")})})}),window.weNexusCartApi.addListener(async(u,b,f)=>{l.disabledCheckoutButton(),await f(),await l.refreshPriceUI(),await l.refreshWidget(),l.enabledCheckoutButton();const y=await c();setTimeout(()=>{if(y.length>0&&(e==null?void 0:e.packageProtectionProductAndVariants.length)>0&&window.Shopify.theme.theme_store_id===887){const P=e==null?void 0:e.packageProtectionProductAndVariants.map(E=>E.excludedPackageProtectionVariants.map(v=>Number(v.id.split("/").pop())));y.every(E=>P.some(v=>v.includes(E.id)))&&Array.from(document.querySelectorAll(".wenexus-package-protection")).forEach(E=>E.style.display="none")}},100)},!0);for(const u of d){if(u.shouldUse&&!u.shouldUse())continue;new window.WeNexusQuerySelectorLive(u.selector,u.boundaryParents).addListener(async f=>{m=await c(),l.refreshWidget();const y=await m.find(N=>N.sku==="wenexus-shipping-protection");y!=null&&y.sku&&(await n.remove(),l.cartUpdate()),T();const P=await o();for(const N of f){let E=!1;const{container:v,checkbox:I}=await l.getCheckboxContainer(u,P.length>0?s():!1);if(!(P.length==0&&E&&window.Shopify.theme.theme_store_id===887)){switch(E=!0,u.insertPosition){case"before":N.insertAdjacentElement("beforebegin",v);break;case"after":N.insertAdjacentElement("afterend",v);break;case"inside":N.insertAdjacentElement("afterbegin",v);break;case"replace":N.replaceWith(v);break}I.addEventListener("change",async()=>{localStorage.setItem("package-protection-enabled",I.checked.toString()),n.enabled=s(),I.disabled=!0;const $=document.querySelectorAll('button[name="checkout"]');$.forEach(D=>D.disabled=!0),l.refreshWidget(),I.disabled=!1,$.forEach(D=>D.disabled=!1)})}}})}}document.readyState!=="complete"?document.addEventListener("readystatechange",()=>{(document.readyState==="interactive"||document.readyState==="complete")&&h()}):h()})()})();
